<main id="registration-view">
  <h1><%= title %></h1>

  <!-- Server-side error messages -->
  <% if (errors && errors.length > 0) { %>
    <div class="flash-messages">
      <% errors.forEach(error => { %>
        <p><%= error %></p>
      <% }) %>
    </div>
  <% } %>

  <form id="registrationForm" action="/account/register" method="post" class="account-form">
    
    <!-- FIRST NAME -->
    <label for="account_firstname">First Name</label>
    <input 
      type="text" 
      id="account_firstname" 
      name="account_firstname" 
      required
      value="<%= typeof account_firstname != 'undefined' ? account_firstname : '' %>"
    >

    <!-- LAST NAME -->
    <label for="account_lastname">Last Name</label>
    <input 
      type="text" 
      id="account_lastname" 
      name="account_lastname" 
      required
      value="<%= typeof account_lastname != 'undefined' ? account_lastname : '' %>"
    >

    <!-- EMAIL -->
    <label for="account_email">Email</label>
    <input 
      type="email" 
      id="account_email" 
      name="account_email" 
      required
      value="<%= typeof account_email != 'undefined' ? account_email : '' %>"
    >

    <!-- PASSWORD -->
    <label for="account_password">Password</label>
    <div class="password-wrapper">
      <input 
        type="password" 
        id="account_password" 
        name="account_password" 
        required
        minlength="12"
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      >
      <button type="button" id="togglePassword" class="toggle-password">Show</button>
    </div>

    <!-- PASSWORD REQUIREMENTS -->
    <p class="password-hint">
      • Minimum 12 characters<br>
      • At least 1 uppercase letter<br>
      • At least 1 number<br>
      • At least 1 special character
    </p>

    <!-- SUBMIT -->
    <button type="submit" class="submit-btn">Register</button>
  </form>
</main>

<script>
  // Toggle password visibility
  const togglePassword = document.querySelector("#togglePassword");
  const passwordField = document.querySelector("#account_password");

  togglePassword.addEventListener("click", () => {
    const type = passwordField.getAttribute("type") === "password" ? "text" : "password";
    passwordField.setAttribute("type", type);
    togglePassword.textContent = type === "password" ? "Show" : "Hide";
  });
</script>
